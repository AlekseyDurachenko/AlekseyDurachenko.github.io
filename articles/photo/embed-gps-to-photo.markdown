---
layout: article
title : Добавляем GPS-координаты к фотографиям
date  : 2016-05-16 23:19:00
tags  : [exiftool, rmaps, gps, photo, android, GNU/Linux]
---

Итак, вы решили, что пришло время привязывать фотографии к географическим
координатам, но ваш фотоаппарат не обладает встроенным или внешним модулем GPS
и вам не хочется тратить деньги на новую технику. Что делать?! Записать GPS 
трек на телефон а затем встроить полученные координаты в фотографии!

Ниже я опишу свой алгоритм действий, а так же используемое программное обеспечение.

## Дано
- любой фотоаппарат с возможностью установки даты и времени;
- компьютер с установленной ОС GNU/Linux;
- телефон c поддержкой GPS на базе ОС Android;
- на телефоне установлена программа [rmaps];
- на компьютере установлен пакет [exiftool].

## Процесс съемки
- синхронизируем время на телефоне и фотоаппарате;
- включаем GPS на телефоне;
- запускаем [rmaps];
- включаем запись трека (меню: "Еще" -> "Треки", кнопка "Старт");
- фотографируем, пока не надоест;
- останавливаем запись трека;
- экспортируем трек в GPX ("Экспорт в GPX" в контекстом меню);
- копируем фотографии на компьютер;
- копируем GPX файл в папку с фотографиями и переименовываем в **track.gpx**.

## Привязка фотографий к географическим координатам
{% highlight bash %}
exiftool -overwrite_original -geosync=+06:00:00 -geotag=track.gpx *.JPG
{% endhighlight %}

- -overwrite_original - перезапись исходных файлов;
- -geosync=+06:00:00 - коррекция времени(фотоаппарат вставляет в файлы локальное время, а файлы gpx хранят время в UTC).

## Полезные ссылки:
- [http://www.sno.phy.queensu.ca/~phil/exiftool/geotag.html](http://www.sno.phy.queensu.ca/~phil/exiftool/geotag.html) - Geotagging with ExifTool


[rmaps]: https://f-droid.org/repository/browse/?fdid=com.robert.maps
[exiftool]: http://www.sno.phy.queensu.ca/~phil/exiftool/

